# map weakmap

- es6 新增的数据结构，作为企业级大型语言需要的内置数据结构
- key 可以是对象
- map(强) , wenkmap(弱引用)

*Map:*
- 键可以是任何类型（原始类型、对象、函数等）
- 键是强引用，不会被垃圾回收

- 可以遍历（for...of、forEach、keys()、values()、entries()）
- 有 size 属性

- 强引用，即使键对象没有其他引用，Map 仍然持有引用，不会被垃圾回收
- 可能导致内存泄漏

*WeakMap:*
- 键只能是对象（包括数组、函数等引用类型）
- 键是弱引用，当键对象没有其他引用时会被垃圾回收

- 不可遍历
- 没有 size 属性
- 只有 get()、set()、has()、delete() 方法

- 弱引用，当键对象没有其他引用时，会被垃圾回收
- 有助于防止内存泄漏

*垃圾回收*
- 垃圾回收也是一道程序，是语言底层的关键机制
- 内存的动态分配，由操作系统管理
- 引用计数 如果不为0，则不回收
- map 是强引用，我们通过key=null map=null释放内存
- global.gc 手动垃圾回收，前提是node的运行以 node --expose-gc 为运行方式

- Map，Set 需要手动去考虑内存的开销，WeakMap，WeakSet 弱引用自动实现
  global.gc()