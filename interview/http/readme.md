# http 各个版本的特性

  - OSI 七层协议
  - 基于TCP/IP
  - 三次握手/四次挥手
  - http/https
  - 浏览器缓存

  - http 各个版本的特性
    - http 0.9 无状态
      最早的版本，只支持get请求，响应只有HTML文本，没有header，只能传输简单网页，不能传递图片、css、js
      image/jpg text/css text/js
    
    - http 1.0 无连接
      引入了请求头header，能传输多种类型的数据，支持传输图片、css、js
      虽然有cookie，但仍然是无状态的
      缺点：
      - 每次请求都要建立TCP 连接，连接建立后会一直保持，直到请求结束
        开销浪费，同域名下的资源都是共享同一个TCP 连接，因为早期用户并不多
        http是一种基于请求响应的简单协议 TCP连接还要断开

      
    - http 1.1 持久连接
      - 用户多，一定要解决TCP连接每次都重新建立的问题
      - 推出了长链接
        Connection:keep-alive
        一个TCP可以处理多个请求，浏览器通过一个TCP链接连续请求
        页面图片脚本等多个资源，服务器处理完不会立即断开，而是保持链接，后续请求无需重新建立链接，节省时间和性能开销，提高加载速度

      - 管道化pipelining
        允许同时发送多个请求，但是响应必须按顺序返回

      - 数据分块传输 chuck
        

        你用支持管道化的浏览器，依次发送 获取首页，图片1，图片2，图片3...
        等待前一个响应，但服务器必须按顺序处理请求，所以图片1必须先返回，才能返回图片2，图片3...

        TCP可靠的传输，一个通信的多个数据包，按顺序、全部到达浏览器
        但是没能实现真正的并发，TCP安全，响应式还是顺序传输
        缺点：如果排在前面的资源传输慢，后面的资源会被阻塞，

        - 路由懒加载，分包
          App.jsx 不同的文件
          Login.jsx 不同的文件
          路由懒加载，只有访问到这个路由，才会加载对应的文件，不会一次性加载所有的文件，减少了初始加载时间
          分包，把不同的文件打包成不同的文件，只有访问到这个文件，才会加载对应的文件，不会一次性加载所有的文件，减少了初始加载时间
        - http 优化，图片懒加载
          js.css/img 过多，不拆分，反而合并文件
          同一个域名请求并发的上限是6个，超过6个，会被阻塞，
        - base64 图片 放在html/css文件中，减少请求
        - 图标字体库 iconfont
        - 开启压缩
        - 使用多个域名 一般在静态资源的CDN服务器上，

    - http 2.0 多路复用
      - 并发，多路复用
        一个TCP链接上并发多个请求，不再对头阻塞
        多路复用把数据拆成帧交错传输，请求和响应可以乱序发送，客户端可以根据帧的编号重新组装
      - 二进制数据帧：
        所有请求和响应都拆分成小数据帧，通过一个链接并发传输，每个帧带有编号，可以指定是哪个文件，客户端也可以根据编号重组，无需排队甚至可以插队，谁先准备好就先发送，解决了队头阻问题
        头部压缩，减少重复header传输，服务器端推送server push
        服务器端可主动推送资源，比如首页get/返回很快，但首屏还依赖app.css

      - 页面快速显示

    - http 3.0 QUIC
      - 基于UDP协议，UDP是无连接的，传输速度快，但是不可靠，TCP可靠
      - 多路复用，每个流都有自己的ID，不需要排队
      - 加密传输，TLS 1.3
